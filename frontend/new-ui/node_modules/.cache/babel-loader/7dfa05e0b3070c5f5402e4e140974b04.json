{"ast":null,"code":"var _jsxFileName = \"D:\\\\College\\\\Capstone project\\\\Final\\\\frontend\\\\new-ui\\\\src\\\\components\\\\pages\\\\Upload.jsx\";\nimport React, { Component } from 'react';\nimport './Upload.css';\nimport Tutorial from './Tutorial';\nimport jwt_decode from 'jwt-decode';\n\nclass Upload extends Component {\n  constructor() {\n    super();\n    this.state = {\n      text1: '',\n      summary1: '',\n      mapping: {},\n      ppt_path: '',\n      fname: '',\n      pdf_path: '',\n      numPages: null,\n      pageNumber: 1,\n      onsubmit: false,\n      boolean_question: {},\n      mcq: {},\n      subtopic_mapping: [],\n      filename: '',\n      username: jwt_decode(localStorage.usertoken).identity.username,\n      tutorial_id: 0\n    };\n    this.handleUpload = this.handleUpload.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    console.log(jwt_decode(localStorage.usertoken).identity.username);\n  }\n\n  handleUpload(e) {\n    e.preventDefault();\n    const fileInput = document.querySelector(\"#file-js-example input[type=file]\");\n\n    if (fileInput.files.length > 0) {\n      const fileName = document.querySelector(\"#file-js-example .file-name\");\n      fileName.textContent = fileInput.files[0].name;\n    }\n\n    ;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const data = new FormData();\n    data.append('Upload', this.uploadInput.files[0]); //data.append('filename', this.fileName.value);\n\n    fetch('http://localhost:5000/submit', {\n      method: 'POST',\n      body: data\n    }).then(response => {\n      response.json().then(body => {\n        this.setState({\n          text1: body.text,\n          summary1: body.summary,\n          mapping: body.mapping,\n          fname: body.fname,\n          filename: body.filename\n        });\n        console.log(this.state);\n        fetch('http://localhost:5000/ppt', {\n          method: 'POST',\n          body: JSON.stringify(this.state),\n          headers: new Headers({\n            \"content-type\": \"application/json\"\n          })\n        }).then(response => {\n          response.json().then(body => {\n            console.log(body);\n            this.setState({\n              ppt_path: body.ppt_path,\n              pdf_path: body.pdf_path,\n              subtopic_mapping: body.subtopic_mapping,\n              tutorial_id: body.tutorial_id\n            });\n            console.log(this.state.ppt_path, this.state.pdf_path);\n            fetch('http://localhost:5000/assessments', {\n              method: 'POST',\n              body: JSON.stringify({\n                'data': this.state.text1,\n                'id': this.state.tutorial_id\n              }),\n              headers: new Headers({\n                \"content-type\": \"application/json\"\n              })\n            }).then(response => {\n              response.json().then(body => {\n                this.setState({\n                  mcq: body.mcq\n                });\n                console.log(this.state);\n                this.setState({\n                  onsubmit: true\n                });\n              });\n            }); // document.body.appendChild(pdf_preview);\n            // document.getElementById(\"pdf_preview\").src=this.state.pdf_path;\n          });\n        });\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }\n    }, !this.state.onsubmit && /*#__PURE__*/React.createElement(\"main\", {\n      role: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"is-size-3 has-text-black has-text-weight-bold has-text-centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, \"Upload any Document to get an instant Tutorial\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"is-size-4 has-text-weight-bold has-text-centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, \"You Know \\uD83D\\uDCD6, You Grow \\uD83D\\uDE80\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"is-size-5 has-text-black has-text-weight-medium has-text-centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, \" PDF \\u2022 TXT \")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"is-size-5 has-text-black has-text-weight-medium has-text-centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, \"Enter Name \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 99\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 120\n      }\n    })), \"Enter Label \", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card has-text-centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"https://cdn4.iconfinder.com/data/icons/files-and-folders-thinline-icons-set/144/File_PDF-512.png\",\n      alt: \"upload\",\n      height: \"300px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"file-js-example\",\n      class: \"file has-name is-fullwidth\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"file-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      class: \"file-input\",\n      type: \"file\",\n      name: \"file\",\n      accept: \".txt, application/pdf\",\n      onChange: this.handleUpload,\n      ref: ref => {\n        this.uploadInput = ref;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      class: \"file-cta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"file-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      class: \"file-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, \" Choose a file\\u2026 \")), /*#__PURE__*/React.createElement(\"span\", {\n      class: \"file-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, \" No file uploaded \"))), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"button has-text-centered is-large is-fullwidth is-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"submit has-text-centered\",\n      type: \"submit\",\n      name: \"upload file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(\"span\", {\n      class: \"loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-refresh\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      class: \"check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 31\n      }\n    })))))), this.state.onsubmit && /*#__PURE__*/React.createElement(Tutorial, {\n      data: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 28\n      }\n    }));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["D:/College/Capstone project/Final/frontend/new-ui/src/components/pages/Upload.jsx"],"names":["React","Component","Tutorial","jwt_decode","Upload","constructor","state","text1","summary1","mapping","ppt_path","fname","pdf_path","numPages","pageNumber","onsubmit","boolean_question","mcq","subtopic_mapping","filename","username","localStorage","usertoken","identity","tutorial_id","handleUpload","bind","handleSubmit","console","log","e","preventDefault","fileInput","document","querySelector","files","length","fileName","textContent","name","data","FormData","append","uploadInput","fetch","method","body","then","response","json","setState","text","summary","JSON","stringify","headers","Headers","render","ref"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\r\nimport './Upload.css';\r\nimport Tutorial from './Tutorial';\r\nimport jwt_decode from 'jwt-decode'\r\n\r\nclass Upload extends Component{\r\n\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n        text1: '',\r\n        summary1: '',\r\n        mapping: {},\r\n        ppt_path: '',\r\n        fname: '',\r\n        pdf_path: '',\r\n        numPages: null, \r\n        pageNumber: 1,\r\n        onsubmit:false,\r\n        boolean_question: {},\r\n        mcq:{},\r\n        subtopic_mapping:[],\r\n        filename:'',\r\n        username:jwt_decode(localStorage.usertoken).identity.username,\r\n        tutorial_id:0\r\n     };\r\n\r\n    this.handleUpload = this.handleUpload.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    console.log(jwt_decode(localStorage.usertoken).identity.username)\r\n\r\n  }\r\n \r\n  handleUpload(e){\r\n    e.preventDefault();\r\n    const fileInput = document.querySelector(\r\n            \"#file-js-example input[type=file]\"\r\n          );\r\n    if (fileInput.files.length > 0) {\r\n              const fileName = document.querySelector(\r\n                \"#file-js-example .file-name\"\r\n              );\r\n              fileName.textContent = fileInput.files[0].name;\r\n            };\r\n  }\r\n\r\n  handleSubmit(e){\r\n    e.preventDefault();\r\n\r\n    const data = new FormData();\r\n    data.append('Upload', this.uploadInput.files[0]);\r\n    //data.append('filename', this.fileName.value);\r\n\r\n    fetch('http://localhost:5000/submit', {\r\n      method: 'POST',\r\n      body: data,\r\n    }).then((response) => {\r\n      response.json().then((body) => {\r\n        this.setState({ text1: body.text,  summary1: body.summary, mapping:body.mapping, fname:body.fname, filename:body.filename});\r\n        console.log(this.state);\r\n            fetch('http://localhost:5000/ppt', {\r\n      method: 'POST',\r\n      body: JSON.stringify(this.state),\r\n      headers: new Headers({\r\n        \"content-type\": \"application/json\"\r\n      }),\r\n    }).then((response) => {\r\n      response.json().then((body) => {\r\n        console.log(body)\r\n        this.setState({ ppt_path: body.ppt_path , pdf_path: body.pdf_path, subtopic_mapping:body.subtopic_mapping,tutorial_id:body.tutorial_id});\r\n        console.log(this.state.ppt_path,this.state.pdf_path);\r\n        fetch('http://localhost:5000/assessments', {\r\n      method: 'POST',\r\n      body:JSON.stringify({'data':this.state.text1,'id':this.state.tutorial_id}),\r\n      headers: new Headers({\r\n        \"content-type\": \"application/json\"\r\n      }),\r\n    }).then((response) => {\r\n      response.json().then((body) => {\r\n        this.setState({mcq:body.mcq});\r\n        console.log(this.state);\r\n        this.setState({onsubmit:true});\r\n    });\r\n});\r\n    \r\n        // document.body.appendChild(pdf_preview);\r\n        // document.getElementById(\"pdf_preview\").src=this.state.pdf_path;\r\n      });\r\n    });\r\n    });\r\n});\r\n}\r\n  render(){\r\n  return (\r\n    <div className=\"upload\">\r\n     \r\n      {!this.state.onsubmit &&(\r\n      <main role=\"main\">\r\n      <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css\" />\r\n    <div className=\"hero\">\r\n      <p className=\"is-size-3 has-text-black has-text-weight-bold has-text-centered\">Upload any Document to get an instant\r\n        Tutorial</p>\r\n      <p className=\"is-size-4 has-text-weight-bold has-text-centered\">You Know ðŸ“–, You Grow ðŸš€</p>\r\n      <p className=\"is-size-5 has-text-black has-text-weight-medium has-text-centered\"> PDF â€¢ TXT </p>\r\n      </div>\r\n      <br></br>\r\n      <form onSubmit={this.handleSubmit}>\r\n      <p className=\"is-size-5 has-text-black has-text-weight-medium has-text-centered\">Enter Name <input type=\"text\" /><br/></p>\r\n        Enter Label <input type=\"text\"/>\r\n    <div className=\"card has-text-centered\">\r\n      <img src=\"https://cdn4.iconfinder.com/data/icons/files-and-folders-thinline-icons-set/144/File_PDF-512.png\"\r\n        alt=\"upload\" height=\"300px\"/>\r\n      \r\n        <div id=\"file-js-example\" class=\"file has-name is-fullwidth\">\r\n          <label class=\"file-label\">\r\n            <input class=\"file-input\" type=\"file\" name=\"file\" accept=\".txt, application/pdf\" onChange={this.handleUpload} ref={(ref) => { this.uploadInput = ref; }}/>\r\n            <span class=\"file-cta\">\r\n              <span class=\"file-icon\">\r\n                <i class=\"fas fa-upload\"></i>\r\n              </span>\r\n              <span class=\"file-label\"> Choose a fileâ€¦ </span>\r\n            </span>\r\n            <span class=\"file-name\"> No file uploaded </span>\r\n          </label>\r\n        </div>\r\n        \r\n        <button class=\"button has-text-centered is-large is-fullwidth is-dark\">\r\n          <span class=\"submit has-text-centered\" type=\"submit\" name=\"upload file\">Submit</span>\r\n          <span class=\"loading\"><i class=\"fa fa-refresh\"></i></span>\r\n          <span class=\"check\"><i class=\"fa fa-check\"></i></span>\r\n        </button>\r\n        </div>\r\n      </form>\r\n  </main>)}\r\n  {this.state.onsubmit && (<Tutorial data={this.state}/>)}\r\n    </div>\r\n \r\n  );\r\n    }\r\n}\r\n\r\nexport default Upload;"]},"metadata":{},"sourceType":"module"}